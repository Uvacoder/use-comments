import { Button } from 'theme-ui';

## Getting started

1. **Deploy Hasura**

   Click this ðŸ‘‡ to deploy a fresh [Hasura] instance.

   <Button
     as="a"
     href="https://heroku.com/deploy?template=https://github.com/hasura/graphql-engine-heroku"
     variant="buttons.primary"
     sx={{ my: 2 }}
   >
     Deploy Hasura to Heroku
   </Button>

   We need to keep all of these comments somewhere, right? Hasura handles this
   for us.

   Check out [the docs][hasura-docs] for more details. You can find more options
   for one-click deployment there.

   [hasura]: https://hasura.io

   [hasura-docs]:
   https://hasura.io/docs/1.0/graphql/manual/guides/deployment/heroku-one-click.html

2. **Set config vars in Heroku**

   In order to use our Hasura backend we need to set two enviromental variables
   in Heroku.
   [`HASURA_GRAPHQL_ADMIN_SECRET`](https://hasura.io/docs/1.0/graphql/manual/deployment/heroku/securing-graphql-endpoint.html#heroku-secure)
   will make sure that your GraphQL endpoint and the Hasura console are not
   publicly accessible.
   [`HASURA_GRAPHQL_UNAUTHORIZED_ROLE`](https://hasura.io/docs/1.0/graphql/manual/auth/authentication/unauthenticated-access.html#unauthenticated-access)
   will allow unauthenticated (non-logged in) users add and view comments.

   <img width="700" src="./heroku-env.png" />

3. **Import database schema and metadata**

   In the next step we need to import database schema. Click
   [here](https://github.com/beerose/use-comments/blob/master/hasura/up.sql) and
   copy paste the content.

   <img width="600" src="./sql.png" />

   We also need to import Hasura metadata to set all the permissions. Save this
   file, and import it in Hasura Console:

   <img width="300" src="./metadata.png" />

4. **Install `use-comments`**

   ```
   npm install use-comments
   ```

   ```
   yarn add use-comments
   ```

   or add it from CDN

   ```js
   <script
     crossorigin
     src="https://unpkg.com/use-comments@0.1.3/dist/index.umd.js"
   ></script>

   <script type="module" async>
      const { useComments } = useComments;

      const { comments, error } = useComments(
        'https://use-comments-app.herokuapp.com/v1/graphql',
        'landing-page',
      );
   </script>
   ```

5. **Create beautiful UI for your comments**

   Start off from one of the examples or write it from scratch.

   1. [Theme UI](https://codesandbox.io/s/use-comments-theme-ui-demo-hjqqj)

   2. [Tailwind](https://codesandbox.io/s/use-comments-demo-tailwind-pvhgw)
